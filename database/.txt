
<?php
ob_start();
include "../header.php";
include "../../database/upload.php";
$uploadFN = new Upload();
$databaseFN = new database();

if(isset($_POST['submit'])){
$productName = $_POST['productName'];
$productDescription = $_POST['productDescription'];
$productColor = $_POST['productColor'];
$category = $_POST['category'];
$price = $_POST['price'];
$discount = $_POST['discount'];
$tax = $_POST['tax'];
$weight = $_POST['weight'];
$brand = $_POST['brand'];
$shippingClass = $_POST['shippingClass'];
$warranty = $_POST['warranty'];
$customFields = $_POST['customFields'];
$releaseDate = $_POST['releaseDate'];
$complianceInfo = $_POST['complianceInfo'];
$metaTitle = $_POST['metaTitle'];
$metaDescription = $_POST['metaDescription'];
$keywords = $_POST['keywords'];
$checkImgOrVideo = false;

if(isset($_FILES['productImages']) && $_FILES['productImages']['error'] == UPLOAD_ERR_OK){
    // if ($uploadFN->multiFileUpload($_FILES['productImages'])) {
    //     $productImages = $uploadFN->getFileResult();
    //     $checkImgOrVideo = true;
    // } else {
    //     $checkImgOrVideo = false;
    // }
   print_r( $_FILES['productImages']);
} else {
    $productImages = '';
    $checkImgOrVideo = true;
}
if(isset($_FILES['videos']) && $_FILES['videos']['error'] == UPLOAD_ERR_OK){
    if ($uploadFN->multiFileUpload($_FILES['videos'])) {
        $videos = $uploadFN->getFileResult();
        $checkImgOrVideo = true;
    } else {
        $checkImgOrVideo = false;
    }
} else {
    $videos = '';
    $checkImgOrVideo = true;
}

$productInfo = ['productName' => $productName, 'productDescription'=>$productDescription, 'productColor'=>$productColor, 'category'=>$category, 'price'=>$price, 'discount'=>$discount, 'tax'=>$tax, 'weight'=>$weight, 'brand'=>$brand, 'shippingClass'=>$shippingClass, 'warranty'=>$warranty, 'customFields'=>$customFields, 'releaseDate'=>$releaseDate, 'complianceInfo'=>$complianceInfo, 'metaTitle'=>$metaTitle, 'metaDescription'=>$metaDescription, 'keywords'=>$keywords, 'productImages'=>$productImages, 'videos'=>$videos];
// if($checkImgOrVideo){
//     $databaseFN->insertData("productdetails", $productInfo);
// }
// if ($databaseFN->getResult()) {
//     header("Location: " . $databaseFN->mainUrl ."/admin/products.php");
//     exit();
// } else {
//     header("Location: " . $databaseFN->mainUrl ."/admin/product/?msg=add&error=dbinfalse");
//     exit();
// }

}
ob_end_flush();
?>
